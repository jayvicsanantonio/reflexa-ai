<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Status Panel Demo - Reflexa AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              calm: {
                50: '#f8f9fa',
                100: '#f1f3f5',
                200: '#e9ecef',
                300: '#dee2e6',
                400: '#ced4da',
                500: '#adb5bd',
                600: '#868e96',
                700: '#495057',
                800: '#343a40',
                900: '#212529',
              },
              zen: {
                50: '#f0f9ff',
                100: '#e0f2fe',
                200: '#bae6fd',
                300: '#7dd3fc',
                400: '#38bdf8',
                500: '#0ea5e9',
                600: '#0284c7',
                700: '#0369a1',
                800: '#075985',
                900: '#0c4a6e',
              },
            },
            fontFamily: {
              display: ['Inter', 'system-ui', 'sans-serif'],
              sans: ['Inter', 'system-ui', 'sans-serif'],
              serif: ['Georgia', 'serif'],
              mono: ['Menlo', 'Monaco', 'monospace'],
            },
          },
        },
      };
    </script>
    <style>
      body {
        font-family: 'Inter', system-ui, sans-serif;
      }
      .shadow-soft {
        box-shadow:
          0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .animate-spin {
        animation: spin 1s linear infinite;
      }
    </style>
  </head>
  <body class="bg-calm-50 p-8">
    <div class="mx-auto max-w-2xl space-y-8">
      <!-- Header -->
      <div class="text-center">
        <h1 class="font-display text-calm-900 mb-2 text-3xl font-bold">
          AI Status Panel Demo
        </h1>
        <p class="text-calm-600 text-sm">
          Chrome Built-in AI APIs Status Display
        </p>
      </div>

      <!-- Demo: All APIs Available -->
      <div>
        <h2 class="text-calm-900 mb-4 text-xl font-semibold">
          All APIs Available
        </h2>
        <div
          id="panel-all-available"
          class="border-calm-200 shadow-soft rounded-xl border bg-white p-6"
        ></div>
      </div>

      <!-- Demo: Some APIs Unavailable -->
      <div>
        <h2 class="text-calm-900 mb-4 text-xl font-semibold">
          Some APIs Unavailable
        </h2>
        <div
          id="panel-some-unavailable"
          class="border-calm-200 shadow-soft rounded-xl border bg-white p-6"
        ></div>
      </div>

      <!-- Demo: Experimental Mode -->
      <div>
        <h2 class="text-calm-900 mb-4 text-xl font-semibold">
          Experimental Mode Active
        </h2>
        <div
          id="panel-experimental"
          class="border-calm-200 shadow-soft rounded-xl border bg-white p-6"
        ></div>
      </div>

      <!-- Demo: With Usage Stats -->
      <div>
        <h2 class="text-calm-900 mb-4 text-xl font-semibold">
          With Active Usage Statistics
        </h2>
        <div
          id="panel-with-stats"
          class="border-calm-200 shadow-soft rounded-xl border bg-white p-6"
        ></div>
      </div>
    </div>

    <script>
      // Mock data
      const allAvailableCapabilities = {
        summarizer: true,
        writer: true,
        rewriter: true,
        proofreader: true,
        languageDetector: true,
        translator: true,
        prompt: true,
        experimental: false,
      };

      const someUnavailableCapabilities = {
        summarizer: true,
        writer: true,
        rewriter: false,
        proofreader: false,
        languageDetector: true,
        translator: false,
        prompt: true,
        experimental: false,
      };

      const experimentalCapabilities = {
        summarizer: true,
        writer: true,
        rewriter: true,
        proofreader: true,
        languageDetector: true,
        translator: true,
        prompt: true,
        experimental: true,
      };

      const emptyUsageStats = {
        summarizations: 0,
        drafts: 0,
        rewrites: 0,
        proofreads: 0,
        translations: 0,
        languageDetections: 0,
        sessionStart: Date.now() - 1000 * 60 * 15, // 15 minutes ago
      };

      const activeUsageStats = {
        summarizations: 12,
        drafts: 5,
        rewrites: 8,
        proofreads: 3,
        translations: 4,
        languageDetections: 6,
        sessionStart: Date.now() - 1000 * 60 * 45, // 45 minutes ago
      };

      // Render function
      function renderAIStatusPanel(
        containerId,
        capabilities,
        usageStats,
        experimentalMode
      ) {
        const container = document.getElementById(containerId);

        const totalOperations =
          usageStats.summarizations +
          usageStats.drafts +
          usageStats.rewrites +
          usageStats.proofreads +
          usageStats.translations +
          usageStats.languageDetections;

        const sessionDuration = Date.now() - usageStats.sessionStart;
        const formatDuration = (ms) => {
          const minutes = Math.floor(ms / 60000);
          if (minutes < 60) {
            return `${minutes}m`;
          }
          const hours = Math.floor(minutes / 60);
          const remainingMinutes = minutes % 60;
          return remainingMinutes > 0
            ? `${hours}h ${remainingMinutes}m`
            : `${hours}h`;
        };

        const apiStatuses = [
          {
            name: 'Summarizer',
            key: 'summarizer',
            icon: 'M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01',
          },
          {
            name: 'Writer',
            key: 'writer',
            icon: 'M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z',
          },
          {
            name: 'Rewriter',
            key: 'rewriter',
            icon: 'M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15',
          },
          {
            name: 'Proofreader',
            key: 'proofreader',
            icon: 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z',
          },
          {
            name: 'Language Detector',
            key: 'languageDetector',
            icon: 'M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129',
          },
          {
            name: 'Translator',
            key: 'translator',
            icon: 'M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129',
          },
          {
            name: 'Prompt API',
            key: 'prompt',
            icon: 'M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z',
          },
        ];

        let html = `
          <!-- Header -->
          <div class="mb-6 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div class="bg-zen-100 flex h-10 w-10 items-center justify-center rounded-full">
                <svg class="text-zen-600 h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                </svg>
              </div>
              <div>
                <h2 class="font-display text-calm-900 text-lg font-semibold">AI Status</h2>
                <p class="text-calm-500 text-xs">Chrome Built-in AI APIs</p>
              </div>
            </div>
            <button class="text-calm-600 hover:bg-calm-100 hover:text-calm-900 rounded-md p-2 transition-colors" title="Refresh AI capabilities">
              <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0118.8-4.3M22 12.5a10 10 0 01-18.8 4.2" />
              </svg>
            </button>
          </div>
        `;

        // Experimental Mode Badge
        if (experimentalMode) {
          html += `
            <div class="bg-zen-50 border-zen-200 mb-4 flex items-center gap-2 rounded-lg border p-3">
              <svg class="text-zen-600 h-5 w-5 shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              <div class="flex-1">
                <p class="text-calm-900 text-sm font-medium">Experimental Mode Active</p>
                <p class="text-calm-600 text-xs">Using beta AI features and capabilities</p>
              </div>
            </div>
          `;
        }

        // API Status Grid
        html += '<div class="mb-6 grid grid-cols-2 gap-3">';
        apiStatuses.forEach((api) => {
          const isAvailable = capabilities[api.key];
          html += `
            <div class="border-calm-200 rounded-lg border p-3 transition-colors ${isAvailable ? 'bg-zen-50/50' : 'bg-calm-50'}">
              <div class="flex items-center gap-2">
                <div class="flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${isAvailable ? 'bg-zen-100' : 'bg-calm-200'}">
                  <svg class="h-4 w-4 ${isAvailable ? 'text-zen-600' : 'text-calm-400'}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="${api.icon}" />
                  </svg>
                </div>
                <div class="min-w-0 flex-1">
                  <p class="text-calm-900 truncate text-sm font-medium">${api.name}</p>
                  <div class="flex items-center gap-1.5">
                    ${
                      isAvailable
                        ? `
                      <svg class="text-zen-600 h-3 w-3 shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 6L9 17l-5-5" />
                      </svg>
                      <span class="text-zen-600 text-xs font-medium">Available</span>
                    `
                        : `
                      <svg class="text-calm-400 h-3 w-3 shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 6L6 18M6 6l12 12" />
                      </svg>
                      <span class="text-calm-500 text-xs">Unavailable</span>
                    `
                    }
                  </div>
                </div>
              </div>
            </div>
          `;
        });
        html += '</div>';

        // Usage Statistics
        html += `
          <div class="border-calm-200 mb-4 rounded-lg border p-4">
            <h3 class="text-calm-900 mb-3 text-sm font-semibold">Session Statistics</h3>
            <div class="mb-3 flex items-center justify-between">
              <span class="text-calm-600 text-sm">Total AI Operations</span>
              <span class="font-display text-zen-600 text-lg font-bold">${totalOperations}</span>
            </div>
        `;

        if (totalOperations > 0) {
          html += '<div class="space-y-2">';
          if (usageStats.summarizations > 0) {
            html += `
              <div class="flex items-center justify-between">
                <span class="text-calm-600 text-xs">Summarizations</span>
                <span class="text-calm-900 font-mono text-xs font-medium">${usageStats.summarizations}</span>
              </div>
            `;
          }
          if (usageStats.drafts > 0) {
            html += `
              <div class="flex items-center justify-between">
                <span class="text-calm-600 text-xs">Drafts</span>
                <span class="text-calm-900 font-mono text-xs font-medium">${usageStats.drafts}</span>
              </div>
            `;
          }
          if (usageStats.rewrites > 0) {
            html += `
              <div class="flex items-center justify-between">
                <span class="text-calm-600 text-xs">Rewrites</span>
                <span class="text-calm-900 font-mono text-xs font-medium">${usageStats.rewrites}</span>
              </div>
            `;
          }
          if (usageStats.proofreads > 0) {
            html += `
              <div class="flex items-center justify-between">
                <span class="text-calm-600 text-xs">Proofreads</span>
                <span class="text-calm-900 font-mono text-xs font-medium">${usageStats.proofreads}</span>
              </div>
            `;
          }
          if (usageStats.translations > 0) {
            html += `
              <div class="flex items-center justify-between">
                <span class="text-calm-600 text-xs">Translations</span>
                <span class="text-calm-900 font-mono text-xs font-medium">${usageStats.translations}</span>
              </div>
            `;
          }
          if (usageStats.languageDetections > 0) {
            html += `
              <div class="flex items-center justify-between">
                <span class="text-calm-600 text-xs">Language Detections</span>
                <span class="text-calm-900 font-mono text-xs font-medium">${usageStats.languageDetections}</span>
              </div>
            `;
          }
          html += '</div>';
        }

        html += `
            <div class="border-calm-200 mt-3 border-t pt-3">
              <div class="flex items-center justify-between">
                <span class="text-calm-600 text-xs">Session Duration</span>
                <span class="text-calm-900 font-mono text-xs font-medium">${formatDuration(sessionDuration)}</span>
              </div>
            </div>
          </div>
        `;

        // Info Message
        html += `
          <div class="bg-calm-50 border-calm-200 rounded-lg border p-3">
            <p class="text-calm-600 text-xs leading-relaxed">
              All AI processing happens locally on your device using Gemini Nano. No data is sent to external servers.
            </p>
          </div>
        `;

        container.innerHTML = html;
      }

      // Render all demos
      renderAIStatusPanel(
        'panel-all-available',
        allAvailableCapabilities,
        emptyUsageStats,
        false
      );
      renderAIStatusPanel(
        'panel-some-unavailable',
        someUnavailableCapabilities,
        emptyUsageStats,
        false
      );
      renderAIStatusPanel(
        'panel-experimental',
        experimentalCapabilities,
        emptyUsageStats,
        true
      );
      renderAIStatusPanel(
        'panel-with-stats',
        allAvailableCapabilities,
        activeUsageStats,
        false
      );
    </script>
  </body>
</html>
