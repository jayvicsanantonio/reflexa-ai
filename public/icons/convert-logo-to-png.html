<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Convert Reflexa AI Logo to PNG Icons</title>
    <style>
      body {
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #333;
        margin-bottom: 20px;
      }
      .instructions {
        background: #e3f2fd;
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 20px;
        border-left: 4px solid #2196f3;
      }
      button {
        background: #2196f3;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px 10px 10px 0;
      }
      button:hover {
        background: #1976d2;
      }
      .preview {
        display: flex;
        gap: 20px;
        margin-top: 20px;
        flex-wrap: wrap;
      }
      .preview-item {
        text-align: center;
        padding: 10px;
        background: #f5f5f5;
        border-radius: 4px;
      }
      .preview-item img {
        display: block;
        margin: 10px auto;
        border: 1px solid #ddd;
      }
      canvas {
        display: none;
      }
      .status {
        margin-top: 20px;
        padding: 10px;
        border-radius: 4px;
      }
      .success {
        background: #c8e6c9;
        color: #2e7d32;
      }
      .error {
        background: #ffcdd2;
        color: #c62828;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ðŸŽ¨ Convert Reflexa AI Logo to PNG Icons</h1>

      <div class="instructions">
        <strong>Instructions:</strong>
        <ol>
          <li>Click "Generate PNG Icons" to create all required sizes</li>
          <li>Preview the generated icons below</li>
          <li>Click individual "Download" buttons to save each PNG file</li>
          <li>
            Save them in the <code>public/icons/</code> folder with the names
            shown
          </li>
        </ol>
      </div>

      <button onclick="generateAllIcons()">Generate PNG Icons</button>
      <button onclick="downloadAll()">Download All</button>

      <div id="status"></div>
      <div id="preview" class="preview"></div>

      <canvas id="canvas"></canvas>
    </div>

    <script>
      const sizes = [16, 32, 48, 128];
      const generatedImages = {};

      async function loadSVG() {
        try {
          const response = await fetch('reflexa-ai-logo.svg');
          const svgText = await response.text();
          return svgText;
        } catch (error) {
          showStatus('Error loading SVG: ' + error.message, 'error');
          return null;
        }
      }

      async function generateAllIcons() {
        const svgText = await loadSVG();
        if (!svgText) return;

        const previewDiv = document.getElementById('preview');
        previewDiv.innerHTML = '';

        for (const size of sizes) {
          await generateIcon(svgText, size);
        }

        showStatus('âœ“ All icons generated successfully!', 'success');
      }

      async function generateIcon(svgText, size) {
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = size;
        canvas.height = size;

        // Create an image from SVG
        const img = new Image();
        const svgBlob = new Blob([svgText], {
          type: 'image/svg+xml;charset=utf-8',
        });
        const url = URL.createObjectURL(svgBlob);

        return new Promise((resolve) => {
          img.onload = function () {
            // Clear canvas
            ctx.clearRect(0, 0, size, size);

            // Draw SVG to canvas
            ctx.drawImage(img, 0, 0, size, size);

            // Convert to PNG
            canvas.toBlob((blob) => {
              const pngUrl = URL.createObjectURL(blob);
              generatedImages[size] = { blob, url: pngUrl };

              // Add to preview
              addPreview(size, pngUrl);

              URL.revokeObjectURL(url);
              resolve();
            }, 'image/png');
          };

          img.onerror = function () {
            showStatus('Error loading SVG image', 'error');
            resolve();
          };

          img.src = url;
        });
      }

      function addPreview(size, url) {
        const previewDiv = document.getElementById('preview');
        const item = document.createElement('div');
        item.className = 'preview-item';

        const filename = `icon-${size}.png`;

        item.innerHTML = `
                <strong>${size}x${size}</strong>
                <img src="${url}" width="${size}" height="${size}" alt="${filename}">
                <div><code>${filename}</code></div>
                <button onclick="downloadIcon(${size})">Download</button>
            `;

        previewDiv.appendChild(item);
      }

      function downloadIcon(size) {
        const data = generatedImages[size];
        if (!data) {
          showStatus('Please generate icons first', 'error');
          return;
        }

        const link = document.createElement('a');
        link.download = `icon-${size}.png`;
        link.href = data.url;
        link.click();
      }

      function downloadAll() {
        if (Object.keys(generatedImages).length === 0) {
          showStatus('Please generate icons first', 'error');
          return;
        }

        sizes.forEach((size) => {
          if (generatedImages[size]) {
            setTimeout(() => downloadIcon(size), size * 10);
          }
        });
      }

      function showStatus(message, type) {
        const statusDiv = document.getElementById('status');
        statusDiv.textContent = message;
        statusDiv.className = 'status ' + type;
      }
    </script>
  </body>
</html>
